#!/usr/bin/env ruby\nrequire "fileutils"\n\nAPP_ROOT = File.expand_path("..", __dir__)\n\ndef system!(*args)\n  system(*args, exception: true)\nend\n\nFileUtils.chdir APP_ROOT do\n  # This script is a way to set up or update your development environment automatically.\n  # This script is idempotent, so that you can run it at any time and get an expectable outcome.\n  # Add necessary setup steps to this file.\n\n  puts "== Installing dependencies =="\n  system("bundle check") || system!("bundle install")\n\n  # puts "\n== Copying sample files =="\n  # unless File.exist?("config/database.yml")\n  #   FileUtils.cp "config/database.yml.sample", "config/database.yml"\n  # end\n\n  puts "\n== Preparing database =="\n  system! "bin/rails db:prepare"\n\n  puts "\n== Removing old logs and tempfiles =="\n  system! "bin/rails log:clear tmp:clear"\n\n  unless ARGV.include?("--skip-server")\n    puts "\n== Starting development server =="\n    STDOUT.flush # flush the output before exec(2) so that it displays\n    exec "bin/dev"\n  end\nend\n